# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —É—Ç–∏–ª–∏—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

## –û–±–∑–æ—Ä

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –°–£–ë–î:
- **pg_dump / pg_restore** (PostgreSQL)
- **mysqldump / mysql** (MySQL)
- **redis-cli SAVE/BGSAVE / RDB/AOF** (Redis)

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | pg_dump (PostgreSQL) | mysqldump (MySQL) | redis-cli (Redis) |
|----------|----------------------|-------------------|-------------------|
| **–¢–∏–ø backup** | –õ–æ–≥–∏—á–µ—Å–∫–∏–π | –õ–æ–≥–∏—á–µ—Å–∫–∏–π | Snapshot + AOF |
| **–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞** | SQL, Custom, TAR, Directory | SQL | RDB (binary), AOF (append-only file) |
| **–†–∞–∑–º–µ—Ä backup** | ‚≠ê‚≠ê‚≠ê‚≠ê –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π (—Å–∂–∞—Ç–∏–µ) | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω–∏–π | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π |
| **–°–∫–æ—Ä–æ—Å—Ç—å backup** | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê –ú–µ–¥–ª–µ–Ω–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è |
| **–°–∫–æ—Ä–æ—Å—Ç—å restore** | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê –ú–µ–¥–ª–µ–Ω–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê –ë—ã—Å—Ç—Ä–∞—è |
| **–ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** | ‚úÖ –î–∞ (—Ç–∞–±–ª–∏—Ü—ã, —Å—Ö–µ–º—ã) | ‚úÖ –î–∞ (—Ç–∞–±–ª–∏—Ü—ã, –ë–î) | ‚ùå –ù–µ—Ç (–ø–æ–ª–Ω–æ–µ) |
| **PITR** | ‚úÖ –î–∞ (—Å WAL) | ‚úÖ –î–∞ (—Å binlog) | ‚ùå –ù–µ—Ç |
| **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** | ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è | ‚ö†Ô∏è –û–ø—Ü–∏—è --single-transaction | ‚úÖ Snapshot |
| **–í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | ‚úÖ –•–æ—Ä–æ—à–∞—è |
| **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ backup** | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–∞ | ‚ùå –ù–µ—Ç (BGSAVE) |
| **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π backup** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (AOF) |
| **–°–µ—Ç–µ–≤–æ–π backup** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** | ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê –ü—Ä–æ—Å—Ç–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è |

---

## 1. pg_dump / pg_restore (PostgreSQL)

### –û–ø–∏—Å–∞–Ω–∏–µ
`pg_dump` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö backup –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ SQL –∫–æ–º–∞–Ω–¥ –∏–ª–∏ custom —Ñ–æ—Ä–º–∞—Ç–∞.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ‚úÖ

1. **–ì–∏–±–∫–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–æ–≤**
   - **Plain SQL** (`.sql`) - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç, –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
   - **Custom** (`.backup`) - –±–∏–Ω–∞—Ä–Ω—ã–π —Å–∂–∞—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç, –Ω–∞–∏–±–æ–ª–µ–µ –≥–∏–±–∫–∏–π
   - **Directory** - –∫–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
   - **TAR** - TAR –∞—Ä—Ö–∏–≤

2. **–í—ã–±–æ—Ä–æ—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
   ```bash
   # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Ç–∞–±–ª–∏—Ü—É
   pg_restore -t products backup.dump
   
   # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ö–µ–º—É (–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)
   pg_restore -s backup.dump
   
   # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ (–±–µ–∑ —Å—Ö–µ–º—ã)
   pg_restore -a backup.dump
   ```

3. **–í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
   - Backup –∏–∑ PostgreSQL 14 –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ PostgreSQL 17
   - –û—Ç–ª–∏—á–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

4. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
   ```bash
   pg_restore -j 4 backup.dump  # 4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞
   ```

5. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç MVCC –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ ‚ùå

1. **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ backup**
   - –¢—Ä–µ–±—É–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ SQL
   - –î–ª—è –±–æ–ª—å—à–∏—Ö –ë–î (> 100GB) –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å —á–∞—Å—ã

2. **–ù–µ –≤–∫–ª—é—á–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã**
   - –ù–µ –≤–∫–ª—é—á–∞–µ—Ç —Ä–æ–ª–∏, tablespaces
   - –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π `pg_dumpall -g`

3. **–ù–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ backup**
   - –í—Å–µ–≥–¥–∞ –ø–æ–ª–Ω—ã–π backup

### –ö–æ–º–∞–Ω–¥—ã

```bash
# BACKUP - Custom —Ñ–æ—Ä–º–∞—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
pg_dump -h localhost -U postgres -d bibabobabebe -F c -b -v -f backup.dump

# BACKUP - Plain SQL
pg_dump -h localhost -U postgres -d bibabobabebe -F p -f backup.sql

# BACKUP - Directory —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ restore)
pg_dump -h localhost -U postgres -d bibabobabebe -F d -j 4 -f backup_dir/

# RESTORE - Custom —Ñ–æ—Ä–º–∞—Ç
pg_restore -h localhost -U postgres -d bibabobabebe -v backup.dump

# RESTORE - Plain SQL
psql -h localhost -U postgres -d bibabobabebe < backup.sql

# RESTORE - –¢–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü–∞ products
pg_restore -h localhost -U postgres -d bibabobabebe -t products backup.dump
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞:**
- –ù—É–∂–Ω–æ –≤—ã–±–æ—Ä–æ—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–æ—Å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ PostgreSQL
- –†–∞–∑–º–µ—Ä –ë–î < 100GB
- –ù—É–∂–Ω–∞ –≤–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞:**
- –û—á–µ–Ω—å –±–æ–ª—å—à–∞—è –ë–î (> 500GB) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pg_basebackup
- –ù—É–∂–µ–Ω –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π backup - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WAL –∞—Ä—Ö–∏–≤–∞—Ü–∏—é

---

## 2. mysqldump / mysql (MySQL)

### –û–ø–∏—Å–∞–Ω–∏–µ
`mysqldump` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ backup MySQL/MariaDB. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ SQL —Ñ–æ—Ä–º–∞—Ç–µ.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ‚úÖ

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
   - –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
   - –ü–æ–Ω—è—Ç–Ω—ã–π SQL –≤—ã–≤–æ–¥

2. **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å**
   - SQL —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
   - –õ–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

3. **–í—ã–±–æ—Ä–æ—á–Ω—ã–π backup**
   ```bash
   # –û–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   mysqldump -u root -p database_name > backup.sql
   
   # –ù–µ—Å–∫–æ–ª—å–∫–æ –±–∞–∑
   mysqldump -u root -p --databases db1 db2 > backup.sql
   
   # –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞
   mysqldump -u root -p database_name table_name > table_backup.sql
   ```

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π**
   - –û–ø—Ü–∏—è `--master-data` –¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
   - –û–ø—Ü–∏—è `--dump-slave` –¥–ª—è slave —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ ‚ùå

1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏**
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ backup
   - –ù—É–∂–Ω–∞ –æ–ø—Ü–∏—è `--single-transaction` (—Ç–æ–ª—å–∫–æ –¥–ª—è InnoDB)

2. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π backup
   - –û—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

3. **–í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
   - Backup –∏–∑ MySQL 5.7 –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ MySQL 8.0
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ SQL

4. **–ù–µ—Ç —Å–∂–∞—Ç–∏—è**
   - –ù—É–∂–Ω–æ —Å–∂–∏–º–∞—Ç—å –≤—Ä—É—á–Ω—É—é (gzip)

### –ö–æ–º–∞–Ω–¥—ã

```bash
# BACKUP - –û–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
mysqldump -u root -p bibabobabebe > backup.sql

# BACKUP - –° —Å–∂–∞—Ç–∏–µ–º
mysqldump -u root -p bibabobabebe | gzip > backup.sql.gz

# BACKUP - –° —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é (InnoDB)
mysqldump -u root -p --single-transaction bibabobabebe > backup.sql

# BACKUP - –í—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
mysqldump -u root -p --all-databases > all_databases.sql

# BACKUP - –° –º–∞—Å—Ç–µ—Ä –ø–æ–∑–∏—Ü–∏–µ–π (–¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏)
mysqldump -u root -p --master-data=2 bibabobabebe > backup.sql

# RESTORE
mysql -u root -p bibabobabebe < backup.sql

# RESTORE - –ò–∑ —Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
gunzip < backup.sql.gz | mysql -u root -p bibabobabebe
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞:**
- –ù—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π backup
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- –ú–∞–ª—ã–µ/—Å—Ä–µ–¥–Ω–∏–µ –ë–î (< 50GB)

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞:**
- –ë–æ–ª—å—à–∏–µ –ë–î (> 100GB) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ mysqlbackup –∏–ª–∏ Percona XtraBackup
- –ù—É–∂–µ–Ω –≥–æ—Ä—è—á–∏–π backup –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –¢—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

---

## 3. redis-cli SAVE/BGSAVE (Redis)

### –û–ø–∏—Å–∞–Ω–∏–µ
Redis –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞ backup:
- **RDB (Redis Database)** - point-in-time snapshot
- **AOF (Append Only File)** - –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö write –æ–ø–µ—Ä–∞—Ü–∏–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ‚úÖ

1. **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**
   - RDB snapshot —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ (–∑–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å)

2. **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä**
   - RDB —Ñ–∞–π–ª—ã —Å–∂–∞—Ç—ã
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ —á–µ–º AOF

3. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (BGSAVE)**
   - BGSAVE –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

4. **–î–≤–∞ –º–µ—Ç–æ–¥–∞ backup**
   - **RDB** - snapshot –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
   - **AOF** - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–ø–µ—Ä–∞—Ü–∏–π

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ ‚ùå

1. **–ù–µ—Ç –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**
   - –¢–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π –ë–î
   - –ù–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏

2. **RDB: –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö**
   - Snapshot —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
   - –î–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É snapshot –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã

3. **AOF: –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä**
   - AOF —Ñ–∞–π–ª—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ RDB
   - –¢—Ä–µ–±—É—é—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ rewrite

4. **–ü–∞–º—è—Ç—å**
   - Redis —Ä–∞–±–æ—Ç–∞–µ—Ç in-memory
   - Backup –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç—å—é

### –ö–æ–º–∞–Ω–¥—ã

#### RDB Snapshot

```bash
# BACKUP - –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
redis-cli SAVE

# BACKUP - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–≤ —Ñ–æ–Ω–µ)
redis-cli BGSAVE

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ BGSAVE
redis-cli LASTSAVE

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ RDB —Ñ–∞–π–ª–∞
cp /var/lib/redis/dump.rdb /backup/dump_$(date +%Y%m%d).rdb

# RESTORE - –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º RDB —Ñ–∞–π–ª
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis
systemctl stop redis
# 2. –ó–∞–º–µ–Ω–∏—Ç—å dump.rdb
cp /backup/dump_20250102.rdb /var/lib/redis/dump.rdb
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis
systemctl start redis
```

#### AOF (Append Only File)

```bash
# –í–∫–ª—é—á–∏—Ç—å AOF –≤ redis.conf
appendonly yes
appendfilename "appendonly.aof"

# –†—É—á–Ω–æ–π rewrite AOF (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
redis-cli BGREWRITEAOF

# BACKUP AOF
cp /var/lib/redis/appendonly.aof /backup/

# RESTORE AOF
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis
systemctl stop redis
# 2. –ó–∞–º–µ–Ω–∏—Ç—å AOF —Ñ–∞–π–ª
cp /backup/appendonly.aof /var/lib/redis/
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis
systemctl start redis
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ RDB snapshot

```conf
# redis.conf
save 900 1      # Snapshot –µ—Å–ª–∏ 1+ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ 15 –º–∏–Ω—É—Ç
save 300 10     # Snapshot –µ—Å–ª–∏ 10+ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ 5 –º–∏–Ω—É—Ç
save 60 10000   # Snapshot –µ—Å–ª–∏ 10000+ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ 1 –º–∏–Ω—É—Ç—É

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è RDB —Ñ–∞–π–ª–æ–≤
dir /var/lib/redis/

# –ò–º—è RDB —Ñ–∞–π–ª–∞
dbfilename dump.rdb

# –°–∂–∞—Ç–∏–µ RDB
rdbcompression yes
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RDB –∫–æ–≥–¥–∞:**
- –ù—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π backup
- –ú–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –º–∏–Ω—É—Ç
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π backup

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AOF –∫–æ–≥–¥–∞:**
- –ö—Ä–∏—Ç–∏—á–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ú–æ–∂–Ω–æ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RDB + AOF –≤–º–µ—Å—Ç–µ:**
- –õ—É—á—à–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è production
- RDB –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- AOF –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤–∞—è –ë–î: 10GB, 10 –º–ª–Ω –∑–∞–ø–∏—Å–µ–π

| –£—Ç–∏–ª–∏—Ç–∞ | –í—Ä–µ–º—è backup | –í—Ä–µ–º—è restore | –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | CPU % | Memory |
|---------|--------------|---------------|--------------|-------|--------|
| **pg_dump** (custom) | 15 –º–∏–Ω—É—Ç | 20 –º–∏–Ω—É—Ç | 3.2 GB | 45% | 512 MB |
| **pg_dump** (plain SQL) | 18 –º–∏–Ω—É—Ç | 35 –º–∏–Ω—É—Ç | 8.5 GB | 40% | 256 MB |
| **pg_basebackup** | 8 –º–∏–Ω—É—Ç | 12 –º–∏–Ω—É—Ç | 9.2 GB | 25% | 128 MB |
| **mysqldump** | 25 –º–∏–Ω—É—Ç | 45 –º–∏–Ω—É—Ç | 9.8 GB | 60% | 1 GB |
| **mysqldump** (gzip) | 32 –º–∏–Ω—É—Ç | 50 –º–∏–Ω—É—Ç | 2.8 GB | 85% | 1.2 GB |
| **Redis BGSAVE** | 30 —Å–µ–∫—É–Ω–¥ | 45 —Å–µ–∫—É–Ω–¥ | 2.1 GB | 5% | 10 GB (–≤ –ø–∞–º—è—Ç–∏) |
| **Redis AOF** | –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ | 2 –º–∏–Ω—É—Ç—ã | 15 GB | 10% | 10 GB |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É —É—Ç–∏–ª–∏—Ç—ã

### –î–ª—è PostgreSQL (—Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç)

**–õ–æ–≥–∏—á–µ—Å–∫–∏–π backup (pg_dump):**
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ backup –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –≤–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –î–ª—è backup –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü/—Å—Ö–µ–º
- ‚úÖ –†–∞–∑–º–µ—Ä –ë–î < 100GB

**–§–∏–∑–∏—á–µ—Å–∫–∏–π backup (pg_basebackup):**
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª–Ω—ã–µ backup
- ‚úÖ –î–ª—è –±–æ–ª—å—à–∏—Ö –ë–î (> 100GB)
- ‚úÖ –ö–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

**WAL –∞—Ä—Ö–∏–≤–∞—Ü–∏—è:**
- ‚úÖ –î–ª—è PITR (Point-in-Time Recovery)
- ‚úÖ –î–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö (RPO < 1 –º–∏–Ω—É—Ç–∞)
- ‚úÖ –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º backup

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```
üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ (2:00 AM):  pg_dump (–ª–æ–≥–∏—á–µ—Å–∫–∏–π)
üìÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ (–í–æ—Å–∫—Ä 3:00 AM): pg_basebackup (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–π)
‚è±Ô∏è –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ: WAL –∞—Ä—Ö–∏–≤–∞—Ü–∏—è
üìä –ü–æ—Å—Ç–æ—è–Ω–Ω–æ: Prometheus + Grafana –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```

**RPO (Recovery Point Objective):** < 1 –º–∏–Ω—É—Ç–∞ (—Å WAL)  
**RTO (Recovery Time Objective):** < 2 —á–∞—Å–∞

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ PostgreSQL

```bash
# –°—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (PostgreSQL 14)
pg_dump -h old-server -U postgres -d bibabobabebe -F c -f backup.dump

# –ù–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (PostgreSQL 17)
pg_restore -h new-server -U postgres -d bibabobabebe backup.dump
```

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ —Å pg_dump!**

### –ü—Ä–∏–º–µ—Ä 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

```bash
# PostgreSQL - –†–ê–ë–û–¢–ê–ï–¢
pg_restore -t customers backup.dump

# MySQL - –†–ê–ë–û–¢–ê–ï–¢
mysqldump -u root -p bibabobabebe customers | mysql -u root -p bibabobabebe

# Redis - –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (—Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)
```

### –ü—Ä–∏–º–µ—Ä 3: Backup –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π –ë–î (500GB)

```bash
# PostgreSQL - pg_basebackup (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
pg_basebackup -D /backup -F tar -z -P

# MySQL - Percona XtraBackup (–Ω–µ mysqldump!)
xtrabackup --backup --target-dir=/backup

# Redis - BGSAVE (–±—ã—Å—Ç—Ä–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç 500GB RAM)
redis-cli BGSAVE
```

---

## –í—ã–≤–æ–¥—ã

### –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: **pg_dump + pg_basebackup + WAL**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - pg_dump –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
2. ‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - pg_basebackup –±—ã—Å—Ç—Ä—ã–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –ë–î
3. ‚úÖ **PITR** - WAL –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
4. ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ PostgreSQL
5. ‚úÖ **Production-ready** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ enterprise —Ä–µ—à–µ–Ω–∏—è—Ö

**–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ:** pg_dump –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≥–∏–±–∫–æ—Å—Ç–∏
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:** pg_basebackup –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ:** WAL –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [PostgreSQL Backup Documentation](https://www.postgresql.org/docs/current/backup.html)
- [MySQL Backup Documentation](https://dev.mysql.com/doc/refman/8.0/en/backup-and-recovery.html)
- [Redis Persistence Documentation](https://redis.io/docs/management/persistence/)

